<html>

  <head>
    <title>
      Upload a shirt design
    </title>
    <link href='http://fonts.googleapis.com/css?family=Muli' rel='stylesheet' type='text/css'>
    <link href="./css/style.css" media="all" rel="stylesheet" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  </head>

  <body>
    <div id="container">
      <h1>Create your T-shirt</h1>
      <form>
        <div id="upload-message">Upload an Image</div>
        <input type="file" class="custom-file-input" id="fileUpload">
      </form>
      <div class="loader"><img src='http://forq.ru/i/loadingbig.gif'></div>
      <canvas id="canvas"  width="300" height="470" style="display:none;cursor:default;"></canvas>
      <div><button id="next">Next</button></div>

    </div>

    <script>
      function el(id){return document.getElementById(id);} // Get elem by ID


      var canvas = document.getElementById("canvas");
      var context = canvas.getContext("2d");

      function readImage() {

          $("form").hide();
          $('canvas').show();
          $(".loader").show();
          if ( this.files && this.files[0] ) {
              var FR= new FileReader();
              FR.onload = function(e) {
                 var img = new Image();
                 var ratio;
                 var height;
                   img.onload = function() {
                     $(".loader").hide();
                     $("#next").show();
                     var ratio = img.height/img.width
                     console.log(ratio)
                     context.drawImage(img, 0, 0,300,(300*ratio));
                   };
          img.src = e.target.result;
              };
              FR.readAsDataURL( this.files[0] );
          }
      }
      el("fileUpload").addEventListener("change", readImage, false);

    </script>
  </body>

</html>
